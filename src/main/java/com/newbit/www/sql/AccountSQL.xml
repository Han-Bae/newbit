<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
			"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="aSQL">
	<!-- 자주 사용하는 내용 -->
	<sql id="selCnt">
		SELECT COUNT(*)
		FROM account
	</sql>
	
	<!-- 로그인 확인 -->
	<select id="login" resultType="int" parameterType="aVO">
		<include refid="selCnt" />
		WHERE id = #{id}
			AND isshow = 'Y'
			AND pw = #{pw}
	</select>
	
	<!-- 아이디확인 -->
	<select id="idCnt" resultType="int" parameterType="string">
		<include refid="selCnt" />
		WHERE id = #{id}
	</select>
	
<!-- 아이디찾기 관련 -->
	<!-- 아이디 찾기 유저 확인 -->
	<select id = "selFidCnt" resultType="int" parameterType="aVO">
		<include refid="selCnt" />
		WHERE isshow = 'Y'
			AND nickname = #{nickname}
			AND email = #{email}
	</select>
	
	<!-- 아이디 찾기 질의문 -->
	<select id = "selFidID" resultType="string" parameterType="aVO">
		SELECT id
		FROM account
		WHERE isshow = 'Y'
			AND email = #{email}
	</select>
	
<!-- 비밀번호찾기 관련 -->
	<!-- 비밀번호 찾기 유저 확인 -->
	<select id = "selFpwCnt" resultType="int" parameterType="aVO">
		<include refid="selCnt" />
		WHERE isshow = 'Y'
			AND id = #{id}
			AND email = #{email}
	</select>
	
	<!-- 비밀번호 재설정 -->
	<update id="editPW" parameterType="aVO">
		UPDATE	account
		SET		pw = #{pw}
		WHERE	id = #{id}
			AND isshow = 'Y'
	</update>
</mapper>